(function(){function f(b){b?(a[0]=a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0,this.blocks=a):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=1732584193;this.h1=4023233417;this.h2=2562383102;this.h3=271733878;this.h4=3285377520;this.block=this.start=this.bytes=0;this.finalized=this.hashed=!1;this.first=!0}var e="object"===typeof window?window:{},c="0123456789abcdef".split(""),l=[-2147483648,8388608,32768,128],q=[24,16,8,0],k=["hex","array","digest",
"arrayBuffer"],a=[],b=function(a){return function(b){return(new f(!0)).update(b)[a]()}};f.prototype.update=function(a){if(!this.finalized){var b="string"!==typeof a;b&&a.constructor===e.ArrayBuffer&&(a=new Uint8Array(a));for(var p,c=0,d,t=a.length||0,h=this.blocks;c<t;){this.hashed&&(this.hashed=!1,h[0]=this.block,h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0);if(b)for(d=this.start;c<t&&64>d;++c)h[d>>2]|=a[c]<<q[d++&3];else for(d=this.start;c<t&&64>d;++c)p=
a.charCodeAt(c),128>p?h[d>>2]|=p<<q[d++&3]:(2048>p?h[d>>2]|=(192|p>>6)<<q[d++&3]:(55296>p||57344<=p?h[d>>2]|=(224|p>>12)<<q[d++&3]:(p=65536+((p&1023)<<10|a.charCodeAt(++c)&1023),h[d>>2]|=(240|p>>18)<<q[d++&3],h[d>>2]|=(128|p>>12&63)<<q[d++&3]),h[d>>2]|=(128|p>>6&63)<<q[d++&3]),h[d>>2]|=(128|p&63)<<q[d++&3]);this.lastByteIndex=d;this.bytes+=d-this.start;64<=d?(this.block=h[16],this.start=d-64,this.hash(),this.hashed=!0):this.start=d}return this}};f.prototype.finalize=function(){if(!this.finalized){this.finalized=
!0;var a=this.blocks,b=this.lastByteIndex;a[16]=this.block;a[b>>2]|=l[b&3];this.block=a[16];56<=b&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0);a[15]=this.bytes<<3;this.hash()}};f.prototype.hash=function(){var a=this.h0,b=this.h1,d=this.h2,c=this.h3,g=this.h4,e,h=this.blocks;for(e=16;80>e;++e){var m=h[e-3]^h[e-8]^h[e-14]^h[e-16];h[e]=m<<1|m>>>31}for(e=0;20>e;e+=5){var n=b&d|~b&c;m=a<<5|a>>>27;g=m+n+g+1518500249+
h[e]<<0;b=b<<30|b>>>2;n=a&b|~a&d;m=g<<5|g>>>27;c=m+n+c+1518500249+h[e+1]<<0;a=a<<30|a>>>2;n=g&a|~g&b;m=c<<5|c>>>27;d=m+n+d+1518500249+h[e+2]<<0;g=g<<30|g>>>2;n=c&g|~c&a;m=d<<5|d>>>27;b=m+n+b+1518500249+h[e+3]<<0;c=c<<30|c>>>2;n=d&c|~d&g;m=b<<5|b>>>27;a=m+n+a+1518500249+h[e+4]<<0;d=d<<30|d>>>2}for(;40>e;e+=5)n=b^d^c,m=a<<5|a>>>27,g=m+n+g+1859775393+h[e]<<0,b=b<<30|b>>>2,n=a^b^d,m=g<<5|g>>>27,c=m+n+c+1859775393+h[e+1]<<0,a=a<<30|a>>>2,n=g^a^b,m=c<<5|c>>>27,d=m+n+d+1859775393+h[e+2]<<0,g=g<<30|g>>>2,
n=c^g^a,m=d<<5|d>>>27,b=m+n+b+1859775393+h[e+3]<<0,c=c<<30|c>>>2,n=d^c^g,m=b<<5|b>>>27,a=m+n+a+1859775393+h[e+4]<<0,d=d<<30|d>>>2;for(;60>e;e+=5)n=b&d|b&c|d&c,m=a<<5|a>>>27,g=m+n+g-1894007588+h[e]<<0,b=b<<30|b>>>2,n=a&b|a&d|b&d,m=g<<5|g>>>27,c=m+n+c-1894007588+h[e+1]<<0,a=a<<30|a>>>2,n=g&a|g&b|a&b,m=c<<5|c>>>27,d=m+n+d-1894007588+h[e+2]<<0,g=g<<30|g>>>2,n=c&g|c&a|g&a,m=d<<5|d>>>27,b=m+n+b-1894007588+h[e+3]<<0,c=c<<30|c>>>2,n=d&c|d&g|c&g,m=b<<5|b>>>27,a=m+n+a-1894007588+h[e+4]<<0,d=d<<30|d>>>2;for(;80>
e;e+=5)n=b^d^c,m=a<<5|a>>>27,g=m+n+g-899497514+h[e]<<0,b=b<<30|b>>>2,n=a^b^d,m=g<<5|g>>>27,c=m+n+c-899497514+h[e+1]<<0,a=a<<30|a>>>2,n=g^a^b,m=c<<5|c>>>27,d=m+n+d-899497514+h[e+2]<<0,g=g<<30|g>>>2,n=c^g^a,m=d<<5|d>>>27,b=m+n+b-899497514+h[e+3]<<0,c=c<<30|c>>>2,n=d^c^g,m=b<<5|b>>>27,a=m+n+a-899497514+h[e+4]<<0,d=d<<30|d>>>2;this.h0=this.h0+a<<0;this.h1=this.h1+b<<0;this.h2=this.h2+d<<0;this.h3=this.h3+c<<0;this.h4=this.h4+g<<0};f.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,d=this.h2,
e=this.h3,g=this.h4;return c[a>>28&15]+c[a>>24&15]+c[a>>20&15]+c[a>>16&15]+c[a>>12&15]+c[a>>8&15]+c[a>>4&15]+c[a&15]+c[b>>28&15]+c[b>>24&15]+c[b>>20&15]+c[b>>16&15]+c[b>>12&15]+c[b>>8&15]+c[b>>4&15]+c[b&15]+c[d>>28&15]+c[d>>24&15]+c[d>>20&15]+c[d>>16&15]+c[d>>12&15]+c[d>>8&15]+c[d>>4&15]+c[d&15]+c[e>>28&15]+c[e>>24&15]+c[e>>20&15]+c[e>>16&15]+c[e>>12&15]+c[e>>8&15]+c[e>>4&15]+c[e&15]+c[g>>28&15]+c[g>>24&15]+c[g>>20&15]+c[g>>16&15]+c[g>>12&15]+c[g>>8&15]+c[g>>4&15]+c[g&15]};f.prototype.toString=f.prototype.hex;
f.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,d=this.h2,c=this.h3,e=this.h4;return[a>>24&255,a>>16&255,a>>8&255,a&255,b>>24&255,b>>16&255,b>>8&255,b&255,d>>24&255,d>>16&255,d>>8&255,d&255,c>>24&255,c>>16&255,c>>8&255,c&255,e>>24&255,e>>16&255,e>>8&255,e&255]};f.prototype.array=f.prototype.digest;f.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(20),b=new DataView(a);b.setUint32(0,this.h0);b.setUint32(4,this.h1);b.setUint32(8,this.h2);b.setUint32(12,this.h3);
b.setUint32(16,this.h4);return a};var d=function(){var a=b("hex");a.create=function(){return new f};a.update=function(b){return a.create().update(b)};for(var d=0;d<k.length;++d){var c=k[d];a[c]=b(c)}return a}();e.a1=d})();
(function(f){var e=function(c){c=c||{};this.startingPos=c.startingPos;this.endingPos=c.endingPos?c.endingPos:Math.pow(2,31)-1;this.step=c.step||15E3;this.eachElement=c.eachElement;if("undefined"===typeof this.startingPos||"function"!==typeof this.eachElement)throw Error("Invalid arguments");this.currentPos=this.startingPos;this.running=!0;this.timer=0};e.prototype.runIt=function(){var c=this;(function q(){for(;c.currentPos<=c.endingPos&&c.running;c.currentPos++)if(c.eachElement(c.currentPos),0===
c.currentPos%c.step){c.currentPos++;c.timer=setTimeout(q,0);break}})()};e.prototype.stopIt=function(){this.running=!1;clearTimeout(this.timer)};f.BDCustomFor=e})(window);
(function(f){function e(a){this.options=k.extend(a||{},q);this.captchaStyleName=this.options.captchaStyleName;this.captchaId=this.options.captchaId;this.image=c.getElementById(this.captchaStyleName+"_CaptchaImage");this.imagePlaceholder=this.image.parentNode;this.imageSrcUrl=this.image.src;this.base64Image=this.grayscaleImageDataUrl=this.colorImageDataUrl=null;this.controlsDisabled=!1;if(a=c.getElementById(this.captchaStyleName+"_ReloadLink"))if(a.style.cssText="display: inline-block !important",
this.reloadTimer=this.progressIndicator=this.newImage=null,this.reloadTimerTicks=0,this.options.autoReloadPeriod=1E3*Math.max(this.options.autoReloadPeriod-10,10),this.options.autoReloadTimeout*=1E3,this.autoReloadPeriodSum=0,this.autoReloading=!1,this.options.autoReloadExpiredImage){this.autoReloadTimer&&clearTimeout(this.autoReloadTimer);var b=this;this.autoReloadTimer=setTimeout(function(){clearTimeout(b.autoReloadTimer);b.autoReloadPeriodSum>=b.options.autoReloadTimeout?(b.disableControls(),b.sessionExpired=
!0):(b.autoReloading=!0,b.reloadImage(),b.autoReloading=!1,b.autoReloadPeriodSum+=b.options.autoReloadPeriod,b=null)},b.options.autoReloadPeriod)}if(a=c.getElementById(this.captchaStyleName+"_ReloadIcon")){this.reloadIconSrc=a.src;this.disabledReloadIconSrc=null;a=c.createElement("img");var d=this;a.onload=function(){d.disabledReloadIconSrc=this.src;d=null};a.src=this.reloadIconSrc.replace("icon","disabled-icon")}this.soundPlayDelayed=this.soundPlayed=!1;this.soundReplayCount=0;this.playNewAudio=
!1;if(a=c.getElementById(this.captchaStyleName+"_SoundLink"))this.soundUrl=a.href;this.soundPlaceholder=c.getElementById(this.captchaStyleName+"_AudioPlaceholder");if(a=c.getElementById(this.captchaStyleName+"_SoundIcon")){this.soundIconSrc=a.src;this.disabledSoundIconSrc=null;a=c.createElement("img");var e=this;a.onload=function(){e.disabledSoundIconSrc=this.src;e=null};a.src=this.soundIconSrc.replace("icon","disabled-icon")}this.validationUrl=this.imageSrcUrl.replace("get=image","get=validation-result");
this.pUrl=this.imageSrcUrl.replace("get=image","get=p");this.followHelpLink=!0;this.options.userInputID&&(this.userInput=a=k.getInputElement(this.options.userInputID),this.userInput.setAttribute("autocomplete","off"),a.style.textTransform=this.options.autoUppercaseInput?"uppercase":"lowercase")}var c=f.document,l=f.navigator,q={captchaStyleName:"",captchaId:"",userInputID:"",autoUppercaseInput:!0,autoFocusInput:!0,autoClearInput:!0,autoReloadExpiredImage:!0,autoReloadPeriod:1200,autoReloadTimeout:7200,
soundStartDelay:0,limitSoundRegeneration:!0,imageColorMode:"none",javaScriptRequired:!0,isTestModeEnabled:!1,reloadTimerMaxTicks:100,reloadTimerDelay:250,minSoundCooldown:2E3,convertGrayscaleImageTimerDelay:500},k={extend:function(a,b){var d={},c;for(c in b){var e=a[c];d[c]="undefined"===typeof e?b[c]:e}return d},getMimeType:function(){return"audio/x-wav"},getTimestamp:function(){var a=new Date;return a.getTime()+6E4*a.getTimezoneOffset()},updateTimestamp:function(a){var b=a.indexOf("&d=");-1!==b&&
(a=a.substring(0,b));return a+"&d="+this.getTimestamp()},detectSSL:function(a){var b=a.indexOf("&e=");-1!==b&&(a=a.substring(0,b)+a.substring(b+4,a.length));"https:"===c.location.protocol&&(a+="&e=1");return a},detectAndroid:function(){var a=!1;l&&l.userAgent&&l.userAgent.match(/Linux; U; Android/)&&(a=!0);return a},detectIOS:function(){var a=!1;l&&l.userAgent&&l.userAgent.match(/like Mac OS/)&&(a=!0);return a},detectFirefox3:function(){var a=!1;l&&l.userAgent&&l.userAgent.match(/(Firefox)\/(3\.6\.[^;\+,\/\s]+)/)&&
(a=!0);return a},detectSafariSSL:function(){var a=!1;if(l&&l.userAgent){var b=l.userAgent.match(/Safari/);b&&((b=l.userAgent.match(/Chrome/))||"https:"!==c.location.protocol||(a=!0))}return a},detectIncompatibleAudio:function(){return this.detectFirefox3()},useHtml5Audio:function(){if(this.detectAndroid()||this.detectIOS())var a=!0;else a=c.createElement("audio"),a=!!a.canPlayType&&!!a.canPlayType("audio/wav")&&!this.detectIncompatibleAudio();return a},detectAndroidBelow41:function(){var a=!1;if(l&&
l.userAgent){var b=l.userAgent.indexOf("Android");0<=b&&4.1>parseFloat(l.userAgent.slice(b+8))&&(a=!0)}return a},soundReplaySupported:function(){return this.useHtml5Audio()&&!this.detectAndroidBelow41()},detectIE:function(){if(l&&l.userAgent){var a=l.userAgent.toLowerCase();if(-1!==a.indexOf("msie")||-1!==a.indexOf("trident/"))return!0}return!1},getIosSafariVersion:function(){var a=null;if(l&&l.userAgent){var b=!1,d=l.userAgent;-1===d.indexOf("iPhone OS")&&-1===d.indexOf("iPad")||-1===d.indexOf("Safari")||
-1!==d.indexOf("CriOS")||-1!==d.indexOf("FxiOS")||(b=!0);b&&(b=d.split("Version/"),2===b.length&&(a=parseInt(b[1])))}return a},detectFilterCssSupport:function(){if(this.detectIE())return!1;var a=this.getIosSafariVersion();if(a&&9>a)return!1;a=c.createElement("div");a.style.cssText="-webkit-filter: blur(1px)";return 0===a.style.length?!1:!0},registerHandler:function(a,b,d,c){if("domready"===b)this.registerDomReadyHandler(d);else if("undefined"!==typeof a.addEventListener)a.addEventListener(b,d,c);
else if("undefined"!==typeof a.attachEvent){var e=b+d;a["e"+e]=d;a[e]=function(b){"undefined"===typeof b&&(b=f.event);a["e"+e](b)};a.attachEvent("on"+b,a[e])}else if(b="o"+b,"function"===typeof a[b]){var p=a[b];a[b]=function(){p();return d()}}else a[b]=d},registerDomReadyHandler:function(a){if(c.addEventListener)c.addEventListener("DOMContentLoaded",function(){c.removeEventListener("DOMContentLoaded",arguments.callee,!1);a()},!1);else if(c.attachEvent){var b=!1;c.attachEvent("onreadystatechange",
function(){"complete"===c.readyState&&(c.detachEvent("onreadystatechange",arguments.callee),a(),b=!0)});c.documentElement.doScroll&&f===f.top&&function(){if(!b){try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,1);return}a();b=!0}}()}else this.registerHandler(f,"load",a,!1)},isCanvasSupported:function(){return!!c.createElement("canvas").getContext},getInputElement:function(a){var b=null,d=c.getElementById(a);if(d)b=d;else if(d=c.querySelectorAll?c.querySelectorAll("input[type=text]"):
c.getElementsByTagName("input"),0!==d.length)for(var e=0;e<d.length;e++)if("text"===d[e].type&&-1!==d[e].id.indexOf(a)){b=d[e];break}return b},parseJson:function(a){var b=null;"undefined"!==typeof JSON&&"function"===typeof JSON.parse&&(b=JSON.parse(a));b||(b=eval("("+a+")"));return b},ajax:{xhr:function(){var a=null;try{return a=new XMLHttpRequest}catch(b){}try{return a=new ActiveXObject("MSXML2.XMLHTTP.5.0")}catch(b){}try{return a=new ActiveXObject("MSXML2.XMLHTTP.4.0")}catch(b){}try{return a=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){}try{return a=
new ActiveXObject("MSXML2.XMLHTTP")}catch(b){}try{return a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}return a},get:function(a,b){var d=this.xhr();d&&0===d.readyState&&(d.onreadystatechange=function(){4===d.readyState&&b(d)},d.open("GET",a,!0),d.send())}}};e.init=function(a,b,d,p,u,v,l,g,q,h,m,n,w,x){var r=function(){c.getElementById(a+"_CaptchaImage")&&(f[a]=new e({captchaStyleName:a,captchaId:b,userInputID:d,autoUppercaseInput:p,autoFocusInput:u,autoClearInput:v,autoReloadExpiredImage:l,autoReloadPeriod:g,
autoReloadTimeout:q,soundStartDelay:h,limitSoundRegeneration:m,imageColorMode:n,javaScriptRequired:w,isTestModeEnabled:x}),f[a].postInit(),f[a].initEventListeners())};"undefined"!==typeof f.jQuery?jQuery(r):"complete"===c.readyState?r():k.registerHandler(f,"domready",r,!1);f.opera?k.registerHandler(f,"popstate",function(b){f[a].reloadImage()},!1):f.chrome?k.registerHandler(f,"domready",function(b){b=c.getElementById("BDC_BackWorkaround_"+a);"0"===b.value?b.value="1":(b.value="0",f[a].reloadImage())},
!1):k.registerHandler(f,"pageshow",function(b){b&&b.persisted&&f[a].reloadImage()},!1)};e.getInstanceByStyleName=function(a){var b=null;a&&(a=f[a],"undefined"!==typeof a&&(b=a));return b};e.prototype.reloadImage=function(){var a=this,b=function(){if(a.image&&!a.reloadInProgress&&!a.sessionExpired&&(!a.controlsDisabled||a.soundPlayDelayed)){a.reloadInProgress=!0;a.disableControls();a.progressIndicator=c.createElement("span");a.progressIndicator.className="BDC_ProgressIndicator";a.progressIndicator.appendChild(c.createTextNode("."));
a.preReloadImage();var b=k.updateTimestamp(a.imageSrcUrl);a.initNewImage(b);a.imagePlaceholder.innerHTML="";a.imagePlaceholder.appendChild(a.progressIndicator);a.showProgress();a=null}};this.useM()?this.gp(b):b()};e.prototype.initNewImage=function(a){this.newImage=c.createElement("img");var b=this,d=!1;this.newImage.onload=function(){!d&&b.newImage&&b.imagePlaceholder&&b.progressIndicator&&(b.imagePlaceholder.innerHTML="",b.imagePlaceholder.appendChild(b.newImage),b.image=b.newImage,b.progressIndicator=
null,b.initImageColorModeHandler(),b.postReloadImage(),b=null,d=!0)};this.newImage.id=this.image.id;this.newImage.alt=this.image.alt;this.imageSrcUrl=this.newImage.src=a;"none"!==this.options.imageColorMode&&this.newImage.setAttribute("style","display: none !important")};e.prototype.showProgress=function(){if(this.progressIndicator&&this.reloadTimerTicks<this.options.reloadTimerMaxTicks){this.reloadTimerTicks+=1;this.updateProgressIndicator();var a=this;this.reloadTimer=setTimeout(function(){a.showProgress();
a=null},this.options.reloadTimerDelay)}else clearTimeout(this.reloadTimer),this.reloadTimerTicks=0,this.reloadInProgress=!1};e.prototype.updateProgressIndicator=function(){0===this.progressIndicator.childNodes.length?this.progressIndicator.appendChild(c.createTextNode(".")):this.progressIndicator.firstChild.nodeValue=0===this.reloadTimerTicks%5?".":this.progressIndicator.firstChild.nodeValue+"."};e.prototype.playSound=function(){if(!(this.soundPlayingInProgess||this.controlsDisabled&&!this.soundPlayDelayed))if(this.disableControls(),
this.options.limitSoundRegeneration&&!k.soundReplaySupported()&&this.soundPlayed)this.soundPlayDelayed=!0,this.reloadImage();else{this.prePlaySound();this.soundPlayingInProgess=!0;if(k.useHtml5Audio()){var a=this,b=c.getElementById("BDC_CaptchaSoundAudio_"+this.captchaStyleName);b&&!this.playNewAudio?(b.currentTime=0,this.soundStartDelayTimer=setTimeout(function(){a&&(clearTimeout(a.soundStartDelayTimer),c.getElementById("BDC_CaptchaSoundAudio_"+a.captchaStyleName).play())},this.options.soundStartDelay)):
(this.soundPlaceholder.innerHTML="",b=this.soundUrl,b=k.updateTimestamp(b),b=k.detectSSL(b),b=new Audio(b),b.id="BDC_CaptchaSoundAudio_"+this.captchaStyleName,b.type="audio/wav",b.autobuffer=!1,b.loop=!1,b.autoplay=!1,b.preload="auto",this.soundPlaceholder.appendChild(b),b.load(),k.registerHandler(b,"canplay",function(){a&&(a.soundStartDelayTimer=setTimeout(function(){clearTimeout(a.soundStartDelayTimer);c.getElementById("BDC_CaptchaSoundAudio_"+a.captchaStyleName).play()},a.options.soundStartDelay))},
!1));k.registerHandler(b,"ended",function(){if(a){var b=c.getElementById("BDC_CaptchaSoundAudio_"+a.captchaStyleName);1===b.duration?b.play():(a.soundPlayingInProgess=!1,a.soundReplayCount=0,a.enableControls(),a=null)}},!1);k.registerHandler(b,"error",function(b){a&&(a.soundReplayCount+=1,1===a.soundReplayCount&&(a.soundPlayingInProgess=!1,a.soundPlayDelayed=!0,a.playNewAudio=!0,a.reloadImage()))},!1)}else this.soundPlaceholder.innerHTML="",a=this,this.soundStartDelayTimer=setTimeout(function(){clearTimeout(a.soundStartDelayTimer);
a.startXhtmlSoundPlayback()},this.options.soundStartDelay);this.soundPlayed=!0}};e.prototype.startXhtmlSoundPlayback=function(){var a=this.soundUrl;a=k.updateTimestamp(a);a=k.detectSSL(a);a='<object id="BDC_CaptchaSoundObject_'+this.captchaStyleName+'" classid="clsid:22D6F312-B0F6-11D0-94AB-0080C74C7E95" height="0" width="0" style="width: 0; height: 0"><param name="AutoStart" value="1"/><param name="Volume" value="0"/><param name="PlayCount" value="1"/><param name="FileName" value="'+a+'"/><embed id="BDC_CaptchaSoundEmbed" src="'+
a+'" autoplay="true" hidden="true" volume="100" type="'+k.getMimeType()+'" style="display:inline"/></object>"';this.soundPlaceholder.innerHTML=a;var b=this;this.soundCooldownTimer=setTimeout(function(){b&&(clearTimeout(b.soundCooldownTimer),b.soundPlayingInProgess=!1,b.enableControls(),b=null)},this.options.minSoundCooldown)};e.prototype.initEventListeners=function(){var a=this,b=c.getElementById(this.captchaStyleName+"_ReloadLink");b&&k.registerHandler(b,"click",function(b){a.reloadImage();this.blur();
b.preventDefault?b.preventDefault():b.returnValue=!1},!1);(b=c.getElementById(this.captchaStyleName+"_SoundLink"))&&k.registerHandler(b,"click",function(b){a.playSound();this.blur();b.preventDefault?b.preventDefault():b.returnValue=!1},!1);(b=c.getElementById(this.captchaStyleName+"_HelpLink"))&&k.registerHandler(b,"click",function(b){a.onHelpLinkClick();a.followHelpLink||(b.preventDefault?b.preventDefault():b.returnValue=!1)},!1)};e.prototype.postInit=function(){this.isCaptchaSecure()||console.error("SimpleCaptcha.UserInputID is not set. BotDetect is not completely secure.");
if(this.useM()){var a=this;this.p(function(b){a.m(b,!1)})}this.initImageColorModeHandler()};e.prototype.preReloadImage=function(){"none"!==this.options.imageColorMode&&this.hideImage();this.clearInput();this.focusInput()};e.prototype.postReloadImage=function(){this.validationUrl=this.imageSrcUrl.replace("get=image","get=validation-result");if(this.options.autoReloadExpiredImage){this.autoReloadTimer&&clearTimeout(this.autoReloadTimer);var a=this;this.autoReloadTimer=setTimeout(function(){clearTimeout(a.autoReloadTimer);
a.autoReloadPeriodSum>=a.options.autoReloadTimeout?(a.disableControls(),a.sessionExpired=!0):(a.autoReloading=!0,a.reloadImage(),a.autoReloading=!1,a.autoReloadPeriodSum+=a.options.autoReloadPeriod,a=null)},a.options.autoReloadPeriod)}this.soundIconSrc?(this.soundPlaceholder.innerHTML="",this.soundPlayed=!1,this.soundPlayDelayed?(this.playSound(),this.soundPlayDelayed=!1):this.enableControls()):this.enableControls()};e.prototype.prePlaySound=function(){this.focusInput()};e.prototype.onHelpLinkClick=
function(){};e.registerCustomHandler=function(a,b){var d=e.prototype[a],c="prePlaySound"===a;e.prototype[a]=function(){b.call(this);c||d.call(this)}};e.prototype.focusInput=function(){this.options.autoFocusInput&&this.userInput&&(this.autoReloading||this.userInput.focus())};e.prototype.clearInput=function(){this.options.autoClearInput&&this.userInput&&(this.userInput.value="")};e.prototype.disableControls=function(){this.controlsDisabled=!0;this.disableReloadIcon();this.disableSoundIcon()};e.prototype.enableControls=
function(){this.controlsDisabled=!1;this.enableReloadIcon();this.enableSoundIcon()};e.prototype.disableReloadIcon=function(){this.reloadIconSrc&&this.disabledReloadIconSrc&&(c.getElementById(this.captchaStyleName+"_ReloadIcon").src=this.disabledReloadIconSrc)};e.prototype.enableReloadIcon=function(){this.reloadIconSrc&&this.disabledReloadIconSrc&&(c.getElementById(this.captchaStyleName+"_ReloadIcon").src=this.reloadIconSrc)};e.prototype.disableSoundIcon=function(){this.soundIconSrc&&this.disabledSoundIconSrc&&
(c.getElementById(this.captchaStyleName+"_SoundIcon").src=this.disabledSoundIconSrc)};e.prototype.enableSoundIcon=function(){this.soundIconSrc&&this.disabledSoundIconSrc&&(c.getElementById(this.captchaStyleName+"_SoundIcon").src=this.soundIconSrc)};e.prototype.getBase64Image=function(a){var b=this.imageSrcUrl.replace("get=image","get=base64-image-string"),d=this;k.ajax.get(b,function(b){if(200!==b.status)d=null;else try{var e=b.responseText;d.colorImageDataUrl=e;d.base64Image=c.createElement("img");
var p=!1;d.base64Image.onload=function(){!p&&d.imagePlaceholder&&(d.imagePlaceholder.innerHTML="",d.imagePlaceholder.appendChild(this),d.image=d.base64Image,p=!0,"function"===typeof a&&a())};d.base64Image.id=d.image.id;d.base64Image.alt=d.image.alt;d.base64Image.src=e;"none"!==d.imageColorMode&&d.base64Image.setAttribute("style","display: none !important")}catch(r){}})};e.prototype.showImage=function(){this.image&&(k.detectFilterCssSupport()?this.image.setAttribute("style","display: block !important"):
(this.imagePlaceholder.innerHTML="",this.base64Image?(this.base64Image.setAttribute("style","display: block !important"),this.imagePlaceholder.appendChild(this.base64Image)):(this.image.style.display="block",this.imagePlaceholder.appendChild(this.image))))};e.prototype.hideImage=function(){this.image&&this.image.setAttribute("style","display: none !important")};e.prototype.initImageColorModeHandler=function(){if(k.detectFilterCssSupport()){switch(this.options.imageColorMode){case "color":this.image.setAttribute("style",
"display: block !important");break;case "grayscale":this.image.setAttribute("style","-webkit-filter: grayscale(100%)!important;-moz-filter: grayscale(100%)!important;-ms-filter: grayscale(100%)!important;-o-filter: grayscale(100%)!important;filter: grayscale(100%)!important;filter: url('url(\"data:image/svg+xml;utf8,<svg%20xmlns='http://www.w3.org/2000/svg'><filter%20id='grayscale'><feColorMatrix%20type='matrix'%20values='0.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200%200%200%201%200'/></filter></svg>#grayscale\");')!important;filter: gray!important")}this.registerImageHoverHandler()}else if(k.isCanvasSupported()){var a=
this;switch(this.options.imageColorMode){case "color":this.getBase64Image(function(){a.showImage();a.registerImageHoverHandler()});break;case "grayscale":this.getBase64Image(function(){a.convertColorImageToGrayscale(function(){a.showImage();a.registerImageHoverHandler()})})}}else this.showImage()};e.prototype.convertColorImageToGrayscale=function(a){var b=0;!this.reloadInProgress&&k.detectIOS()&&(b=this.options.convertGrayscaleImageTimerDelay);var d=this,c=function(){setTimeout(function(){var b=e.imageProcess.getBase64GrayscaleImageDataUrl(f);
f.src=b;d.grayscaleImageDataUrl=b;"function"===typeof a&&a();d=null},b)},f=this.image;f.complete||0!==f.naturalHeight?c():f.onload=function(){c()}};e.prototype.registerImageHoverHandler=function(){if("none"!==this.imageColorMode){var a=this;k.detectFilterCssSupport()?(k.registerHandler(this.image,"mouseenter",function(b){switch(a.options.imageColorMode){case "color":this.setAttribute("style","-webkit-filter: grayscale(100%)!important;-moz-filter: grayscale(100%)!important;-ms-filter: grayscale(100%)!important;-o-filter: grayscale(100%)!important;filter: grayscale(100%)!important;filter: url('url(\"data:image/svg+xml;utf8,<svg%20xmlns='http://www.w3.org/2000/svg'><filter%20id='grayscale'><feColorMatrix%20type='matrix'%20values='0.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200%200%200%201%200'/></filter></svg>#grayscale\");')!important;filter: gray!important");
break;case "grayscale":this.setAttribute("style","")}},!1),k.registerHandler(this.image,"mouseleave",function(b){switch(a.options.imageColorMode){case "color":this.setAttribute("style","");break;case "grayscale":this.setAttribute("style","-webkit-filter: grayscale(100%)!important;-moz-filter: grayscale(100%)!important;-ms-filter: grayscale(100%)!important;-o-filter: grayscale(100%)!important;filter: grayscale(100%)!important;filter: url('url(\"data:image/svg+xml;utf8,<svg%20xmlns='http://www.w3.org/2000/svg'><filter%20id='grayscale'><feColorMatrix%20type='matrix'%20values='0.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200%200%200%201%200'/></filter></svg>#grayscale\");')!important;filter: gray!important")}},
!1)):(k.registerHandler(this.imagePlaceholder,"mouseenter",function(b){if(0<this.children.length)switch(a.options.imageColorMode){case "color":a.grayscaleImageDataUrl=e.imageProcess.getBase64GrayscaleImageDataUrl(this.children[0]);this.children[0].src=a.grayscaleImageDataUrl;break;case "grayscale":this.children[0].src=a.colorImageDataUrl}},!1),k.registerHandler(this.imagePlaceholder,"mouseleave",function(b){if(0<this.children.length)switch(a.options.imageColorMode){case "color":this.children[0].src=
a.colorImageDataUrl;break;case "grayscale":this.children[0].src=a.grayscaleImageDataUrl}},!1))}};e.imageProcess={ImageMatrix:function(a,b,d){this.width=a;this.height=b;this.channel=d;this.data=Array(a*b*d)},getColorImageMatrix:function(a){var b=new Image;b.src=a.src;var d=c.createElement("canvas"),e=d.getContext("2d"),f=a.naturalWidth;a=a.naturalHeight;d.width=f;d.height=a;e.drawImage(b,0,0);b=e.getImageData(0,0,f,a);d=new this.ImageMatrix(f,a,3);for(e=0;e<a;e++)for(var k=0;k<f;k++){var l=4*e*f+4*
k,g=3*e*f+3*k;d.data[g]=b.data[l];d.data[g+1]=b.data[l+1];d.data[g+2]=b.data[l+2]}return d},sRGBFromLinear:function(a){return.0031308<a?1.055*Math.pow(a,1/2.4)-.055:12.92*a},linearFromsRGB:function(a){return.04045<=a?Math.pow((a+.055)/1.055,2.4):a/12.92},getGrayscaleImageMaxtrix:function(a){for(var b=a.width,d=a.height,c=new this.ImageMatrix(b,d,1),e=0;e<d;e++)for(var f=0;f<b;f++){var k=3*e*b+3*f,g=this.linearFromsRGB(a.data[k]/255),l=this.linearFromsRGB(a.data[k+1]/255);k=this.linearFromsRGB(a.data[k+
2]/255);g=Math.round(255*this.sRGBFromLinear(.2126*g+.7152*l+.0722*k));c.data[e*b+f]=g}return c},getGrayscaleImageCanvas:function(a){var b=c.createElement("canvas"),d=b.getContext("2d"),e=a.width,f=a.height;b.width=e;b.height=f;for(var k=d.getImageData(0,0,e,f),l=0;l<f;l++)for(var g=0;g<e;g++){var q=l*e+g,h=4*l*e+4*g;k.data[h]=a.data[q];k.data[h+1]=a.data[q];k.data[h+2]=a.data[q];k.data[h+3]=255}d.putImageData(k,0,0,0,0,e,f);return b},getBase64GrayscaleImageDataUrl:function(a){a=this.getColorImageMatrix(a);
a=this.getGrayscaleImageMaxtrix(a);return this.getGrayscaleImageCanvas(a).toDataURL("image/jpeg")}};e.prototype.useM=function(){return this.options.javaScriptRequired&&this.userInput&&!this.options.isTestModeEnabled};e.prototype.isCaptchaSecure=function(){return!(this.options.javaScriptRequired&&!this.options.isTestModeEnabled&&!this.userInput)};e.prototype.m=function(a,b){if(this.userInput){a=e.cm(a);var d=e.cInt2B(a);k.registerHandler(this.userInput,"keyup",function(){this.value=e.cc2c(this.value,
d)},!1);this.userInput.removeAttribute("disabled");b&&this.userInput.focus()}};e.cm=function(a){return a%65533+1};e.cc2c=function(a,b){b=b.split("");var d=b.length,c=a.split(""),e="";for(a=a.length-1;0<=a;a--){var f=b[d-- -1];f="undefined"!==typeof f&&"1"===f?c[a].toUpperCase():c[a].toLowerCase();e=f+e}return e};e.cInt2B=function(a){return(a>>>0).toString(2)};e.prototype.p=function(a){this.userInput&&(this.userInput.setAttribute("disabled","disabled"),this.fp(function(b){a(b)}))};e.prototype.fp=function(a){var b=
c.getElementById("BDC_Hs_"+this.captchaStyleName),d=c.getElementById("BDC_SP_"+this.captchaStyleName);if(b&&d){var e=c.getElementById("BDC_VCID_"+this.captchaStyleName).value,f=b.value,k,l=new BDCustomFor({startingPos:d.value,step:2200,eachElement:function(b){k=""+b;a1(k+e)===f&&(l.stopIt(),a(b))}});l.runIt()}};e.prototype.gp=function(a){if(this.userInput){this.userInput.setAttribute("disabled","disabled");this.pUrl=this.imageSrcUrl.replace("get=image","get=p");var b=this;k.ajax.get(this.pUrl,function(d){if(200!==
d.status)b=null;else try{a();var e=k.parseJson(d.responseText),f=c.getElementById("BDC_Hs_"+b.captchaStyleName),l=c.getElementById("BDC_SP_"+b.captchaStyleName);f&&l&&(f.value=e.hs,l.value=e.sp,b.p(function(a){b.m(a,b.options.autoFocusInput)}))}catch(r){}})}};f.botdetect=f.BotDetect=e})(window);
